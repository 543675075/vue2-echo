(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8796"],{"510b":function(t,n,e){},9549:function(t,n,e){"use strict";var o=e("510b"),a=e.n(o);a.a},a985:function(t,n,e){"use strict";var o=e("c938"),a=e.n(o);a.a},c938:function(t,n,e){},f75a:function(t,n,e){"use strict";e.r(n);var o=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"index"}},[e("my-banner",{attrs:{json:t.bannerJson}}),e("div",{staticClass:"recommend"},[e("div",{staticClass:"recommen-title"},[t._v("echo每日推荐")]),e("div",{staticClass:"playAll",on:{click:t.playAll}},[e("div",{staticClass:"my-icon-arrow playAll-icon"}),e("div",{staticClass:"playAll-label",attrs:{type:"default"}},[t._v("一键播放")])]),e("my-list",{attrs:{json:t.recommentJson}})],1),e("div",{staticClass:"loading-container"},["loading"===t.loading?e("span",{staticClass:"loading"},[e("mt-spinner",{attrs:{type:"triple-bounce",color:"#6ed56c"}})],1):"nothing"===t.loading?e("span",{staticClass:"nothing"},[t._v("没有更多了T T~")]):"error"===t.loading?e("span",{staticClass:"error"},[t._v("出错啦T T~")]):t._e()])],1)},a=[];function i(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}function s(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function r(t){return i(t)||s(t)||c()}var l=e("c93e"),d=(e("cadf"),e("551c"),e("097d"),e("2f62")),u=e("365c"),m=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"banner"}},[e("mt-swipe",{staticClass:"swiper",attrs:{auto:0}},t._l(t.json,function(t,n){return e("mt-swipe-item",{key:n,staticClass:"swiper-item"},[e("router-link",{attrs:{to:{path:"detail",query:{id:t.sound.id}}}},[e("img",{attrs:{src:t.sound.pic_640}})])],1)}))],1)},p=[],h={props:{json:{type:Array}}},f=h,g=(e("a985"),e("2877")),v=Object(g["a"])(f,m,p,!1,null,null,null);v.options.__file="banner.vue";var b=v.exports,y={name:"index",components:{myBanner:b},data:function(){return{bannerJson:[],recommentJson:[],page:1,lock:!1,loading:!1}},computed:Object(l["a"])({},Object(d["e"])(["audio"])),mounted:function(){this.getBannerData(),this.getRecommentData()},activated:function(){this.lock=!1,window.addEventListener("scroll",this.onScroll)},beforeRouteLeave:function(t,n,e){window.removeEventListener("scroll",this.onScroll),this.lock=!0,e()},methods:Object(l["a"])({},Object(d["d"])(["set_audio_data","set_playList"]),{getBannerData:function(){var t=this;Object(u["a"])().then(function(n){n.data&&(t.bannerJson=n.data)})},getRecommentData:function(){var t=this;this.$indicator.open(),Object(u["c"])(this.page).then(function(n){n.data&&(t.recommentJson=n.data,t.page=2),t.$indicator.close()}).catch(function(){t.$indicator.close()})},getRecommentMore:function(){var t=this;this.loading||(this.lock=!0,this.loading="loading",Object(u["c"])(this.page).then(function(n){var e;(console.log(n),n.data&&n.data.length>0)?((e=t.recommentJson).push.apply(e,r(n.data)),t.page++,t.loading=!1,t.lock=!1):(t.loading="nothing",t.lock=!0)}).catch(function(){t.loading="error",t.lock=!0}))},playAll:function(){this.set_playList(this.recommentJson),this.audio.data&&this.recommentJson[0].sound.id===this.audio.data.sound.id?(this.audio.ele.load(),this.audio.ele.play()):this.set_audio_data(this.recommentJson[0])},onScroll:function(){var t=this;requestAnimationFrame(function(){var n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),a=10,i=n+e+a>=o;i&&!t.lock&&t.getRecommentMore()})}})},w=y,_=(e("9549"),Object(g["a"])(w,o,a,!1,null,null,null));_.options.__file="index.vue";n["default"]=_.exports}}]);